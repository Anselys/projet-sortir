{% extends 'base.html.twig' %}

{% form_theme tri_form 'bootstrap_5_layout.html.twig' %}

{% block title %}{{ parent() }} | Accueil - Liste des Sorties{% endblock %}

{% block main %}
    <div>
            {% if participant != null %}
            <p>Participant·e: {{ participant.pseudo }}</p>
            {% endif %}
            <p>Date du jour: {{ today | date('d/m/Y') }}</p>
    </div>

<section>
    <h2>Filtrer les sorties</h2>

    <div class="row justify-content-center">
        <div class="col-12 col-md-3">

            {{ form_errors(tri_form) }}
            {{ form_start(tri_form) }}
            {{ form_widget(tri_form) }}
            {{ form_end(tri_form) }}
            <button class="btn btn-primary">TODO: EFFACER FILTRES</button>
        </div>
    </div>

</section>

<section>
<table>
    <tr class="table table-dark">
        <th scope="col">Nom de la sortie</th>
        <th scope="col">Date de la sortie</th>
        <th scope="col">Clôture</th>
        <th scope="col">Inscrits/Places</th>
        <th scope="col">Etat</th>
        <th scope="col">Inscrit·e</th>
        <th scope="col">Organisateur·ice</th>
        <th scope="col">Actions</th>
        <th scope="col">Site</th>
    </tr>
    {% for sortie in sorties %}
        <tr>
            <th>{{ sortie.nom }}</th>
            <th>{{ sortie.dateDebut | date('d/m/Y') }}</th>
            <th>{{ sortie.dateCloture | date('d/m/Y') }}</th>
            <th>{{ sortie.participants.count }} / {{ sortie.nbInscriptionsMax }}</th>
            <th>{{ sortie.etat.libelle }}</th>
            <th>TODO: CET UTILISATEUR EST INSCRIT</th>
            <th>{{ sortie.organisateur.prenom }} {{ sortie.organisateur.nom|first|upper }}</th>
            <th>TODO: actions selon si admin/organisateur...</th>
            <th>{{ sortie.siteOrganisateur.nom }}</th>
        </tr>
    {% endfor %}
</table>
</section>


<section>
    <a href="{{ path('app_sortie_creer') }}" class="btn btn-primary">Créer une sortie</a>
</section>





{% endblock %}
