{% extends 'base.html.twig' %}

{% block title %}Sortie{% endblock %}

{% block main %}

    <h2>Détails de la sortie</h2>


    <div class="container">
        <div class="row">
            <!--La classe bg-info ajoute un fond bleu à l'élément-->
            <div class="col">
                <p class="text-light">Nom de la sortie : {{ sortie.nom }}</p>
                <p class="text-light">Date et heure de la sortie : {{ sortie.dateDebut | date('d/m/Y') }}</p>
                <p class="text-light">Date limite d'inscription : {{ sortie.dateCloture | date('d/m/Y') }}    </p>
                <p class="text-light">Nombre de places : {{ sortie.participants.count }} / {{ sortie.nbInscriptionsMax }}</p>
                <p class="text-light">Durée : {{ sortie.duree }}</p>
                <p class="text-light">Description : {{ sortie.description }}</p>

            </div>
            <!--La classe bg-warning ajoute un fond jaune à l'élément-->
            <div class="col">


                <p class="text-light">Ville organisatrice : {{ sortie.siteOrganisateur.nom }}</p>
                <p class="text-light">Lieu : {{ sortie.lieu.nom }}</p>
                <p class="text-light">Rue : {{ sortie.lieu.rue }}</p>
                <p class="text-light">Code postal : {{ sortie.lieu.ville.cpo }}</p>
                <p class="text-light">Latitude : {{ sortie.lieu.latitude }}</p>
                <p class="text-light">Longitude : {{ sortie.lieu.longitude }}</p>
            </div>
            <!--La classe bg-success ajoute un fond vert à l'élément-->
        </div>
    </div>

    <div>
        {% if not(app.user.pseudo == sortie.organisateur.pseudo) %}
            {% if not(app.user.sorties.contains(sortie)) %}
                <a class="btn btn-success" href="{{ path('app_sortie_inscription', { id: sortie.id }) }}"
                   onclick="return confirm('Confirmer l\'inscription ?')">S'inscrire</a>
            {% else %}
                <a class="btn btn-warning" href="{{ path('app_sortie_desinscription', { id: sortie.id }) }}"
                   onclick="return confirm('Vous êtes sur le point d\'annuler votre inscription à cette sortie. Confirmer ?')">Me
                    désinscrire</a>
            {% endif %}
        {% endif %}
        {% if app.user.pseudo == sortie.organisateur.pseudo %}
            <a href="{{ path('app_sortie_edit', { id: sortie.id }) }}" class="btn btn-warning">Modifier</a>
            <a href="{{ path('app_sortie_delete', { id: sortie.id, token: csrf_token('sortie_delete' ~ sortie.id) }) }}"
               class="btn btn-warning"
               onclick="return confirm('Êtes-vous sûr·e de vouloir supprimer cette sortie ?')">Supprimer</a>
        {% endif %}
        {% if is_granted('ROLE_ADMIN') %}
            <div><a class="btn btn-danger" href="{{ path('app_sortie_edit', { id: sortie.id }) }}">Modifier</a>
                <a class="btn btn-danger"
                   href="{{ path('app_sortie_delete', { id: sortie.id, token: csrf_token('sortie_delete' ~ sortie.id) }) }}"
                   onclick="return confirm('[ADMINISTRATEUR] Êtes-vous sûr·e de vouloir supprimer cette sortie ?')">Supprimer</a>
            </div>
        {% endif %}


    </div>

    <div>
        <h3>Liste des participants inscrits :</h3>

        {% for participant in participants %}
            <p class="liens-participants-inscrits"><a href="{{ path('app_profil_detail', { id: participant.id }) }}">
                    {{ participant.pseudo }}
                </a></p>
        {% endfor %}
    </div>





{% endblock %}
